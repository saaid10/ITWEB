(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{58:function(e,t,n){},75:function(e,t,n){},76:function(e,t,n){},77:function(e,t,n){},85:function(e,t,n){},90:function(e,t,n){},91:function(e,t,n){"use strict";n.r(t);var c=n(2),r=n(0),a=n(13),o=n.n(a),i=(n(75),n(76),n(77),n(26)),s=n(16),u=n(20),l=n.n(u),d=n(23),j=n(129),h=n(128),b=n(8),f="App-Id",g="AccessToken",O=function(e){return Math.floor(Math.random()*e)},m=function(){var e="ABCDEFGHIJKLMNOPQRSTUVWXYZ";return e.charAt(Math.floor(Math.random()*e.length))},p=n(15),v=n.n(p),S=v()("GameRoundActions"),x=S("ADD_GAME_ROUNDS"),y=S("CLEAR_GAME_ROUNDS"),w=v()("GameSettingActions"),N=w("SET_N_BACK"),R=w("SET_IS_RUNNING"),k=w("ADD_TO_SAME_LETTER"),T=w("ADD_TO_SAME_LOCATION"),L=w("CLEAR_SCORE"),C=function(e){return function(t){return t(R({isRunning:e}))}},E=function(e){return function(t){return t(T({amountToAdd:e}))}},A=function(e){return function(t){return t(k({amountToAdd:e}))}},_=v()("HighScores"),I=_("ADD_NEW_HIGHSCORE"),D=_.async("GET_HIGHSCORES"),G=function(){var e=Object(d.a)(l.a.mark((function e(){var t,n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=pe.getState().gameSettingsReducer.gameSettings.nBack,e.next=3,fetch("/api/highscore?level=".concat(t),{method:"GET",headers:{"Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(e){return e})).then((function(e){return e.forEach((function(e){e.time=new Date(e.time)})),e}));case 3:return n=e.sent,e.abrupt("return",(function(e){return e(D.done({params:void 0,result:{highScores:n}}))}));case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),B=function(){var e=Object(d.a)(l.a.mark((function e(){var t,n,c;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=pe.getState().gameSettingsReducer,n={score:(t.currentGameScore.correctSameLetter+t.currentGameScore.correctSameLocation)*t.gameSettings.nBack,level:t.gameSettings.nBack,time:new Date},c={highscore:n},e.next=5,fetch("/api/highscore",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"bearer "+window.localStorage.getItem(g)},body:JSON.stringify(c)});case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),P=function(){var e=pe.getState();return 24+e.gameSettingsReducer.gameSettings.nBack-e.gameRoundsReducer.rounds.length},W=n(27),H=function(e){var t=Object(b.c)((function(e){return e.gameRoundsReducer.rounds})),n=t[t.length-1],a=n&&n.Xpossition===e.x&&n.Ypossition===e.y?n.Letter:void 0,o=Object(r.useState)(!1),i=Object(W.a)(o,2),s=i[0],u=i[1];return Object(r.useEffect)((function(){a&&(u(!0),setTimeout((function(){u(!1)}),1e3))}),[n,a]),Object(c.jsx)("div",{className:"grid-item "+(a&&s?"active-letter":"letter"),children:a&&s&&Object(c.jsx)("h1",{children:a})})},U=(n(85),function(){var e=Object(b.c)((function(e){return e.gameSettingsReducer.gameSettings.nBack})),t=Object(b.c)((function(e){return e.gameSettingsReducer.gameSettings.isRunning})),n=Object(b.c)((function(e){return e.gameRoundsReducer.rounds})),a=Object(b.b)(),o=function(){if(t){if(n.length>e){var c=n[n.length-1],r=n[n.length-(e+1)];if(c.Xpossition===r.Xpossition&&c.Ypossition===r.Ypossition)return E(1)(a)}return E(-1)(a)}},i=function(c){if(c.preventDefault(),t){if(n.length>e)if(n[n.length-1].Letter===n[n.length-(e+1)].Letter)return A(1)(a);return A(-1)(a)}};Object(r.useEffect)((function(){var e,t=function(e){"a"===e.key?o():"l"===e.key&&i(e)};return null===(e=document.getElementById(f))||void 0===e||e.addEventListener("keydown",t),function(){var e;null===(e=document.getElementById(f))||void 0===e||e.removeEventListener("keydown",t)}}),[t]);return Object(c.jsx)("div",{className:"dual-back-grid-container",onClick:o,onContextMenu:i,children:function(){for(var e=[],t=0;t<3;t++)for(var n=0;n<3;n++)e.push(Object(c.jsx)(H,{x:t,y:n},"grid possition: "+t+n));return e}()})});function M(){var e=Object(b.b)(),t=Object(b.c)((function(e){return e.gameRoundsReducer.rounds})),n=Object(b.c)((function(e){return e.gameSettingsReducer.gameSettings.isRunning})),a=Object(b.c)((function(e){return e.gameSettingsReducer.gameSettings.nBack})),o=Object(b.c)((function(e){return e.gameSettingsReducer.currentGameScore.correctSameLocation})),i=Object(b.c)((function(e){return e.gameSettingsReducer.currentGameScore.correctSameLetter})),s=function(){C(!1)(e),function(e){e(y())}(e)},u=function(){var e=Object(d.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,B();case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(r.useEffect)((function(){var t=setInterval((function(){0===P()&&(u(),s()),n&&function(){var e={Xpossition:O(3),Ypossition:O(3),Letter:m()},t=new SpeechSynthesisUtterance(e.Letter);return window.speechSynthesis.speak(t),function(t){return t(x({gameRound:e}))}}()(e)}),3e3);return n||clearInterval(t),function(){return clearInterval(t)}}),[t,n]),Object(c.jsxs)("div",{className:"center",children:[Object(c.jsx)("h1",{children:"Welcome to DualBallzBack"}),Object(c.jsxs)("div",{className:"grid-container-3",children:[Object(c.jsxs)("div",{className:"flex-row",children:[Object(c.jsx)("p",{className:"margin-right-10px",children:" Set N-back:"}),Object(c.jsx)("div",{className:"width-50px padding-top-5px",children:Object(c.jsx)(j.a,{defaultValue:1,min:1,max:10,value:a,onChange:function(t,n){"number"===typeof n&&function(e){return function(t){return t(N({nBack:e}))}}(n)(e)},"aria-labelledby":"discrete-slider",valueLabelDisplay:"auto",disabled:n})})]}),Object(c.jsx)(h.a,{variant:"contained",onClick:n?s:function(){!function(e){e(L())}(e),C(!0)(e)},color:n?"secondary":"default",children:n?"Stop Game":"New Game"}),Object(c.jsxs)("div",{children:[Object(c.jsxs)("p",{hidden:!n,children:["Rounds left: ",P()]}),Object(c.jsxs)("p",{hidden:n,children:["Correct by letter: ",o]}),Object(c.jsxs)("p",{hidden:n,children:["Correct by location: ",i]})]})]}),Object(c.jsx)("br",{}),Object(c.jsx)(U,{})]})}var F=function(){return Object(c.jsxs)(c.Fragment,{children:[Object(c.jsx)(M,{}),Object(c.jsxs)("div",{className:"flex-center",children:[Object(c.jsx)("p",{children:'Press "a" or left mouse on same Location'}),Object(c.jsx)("p",{children:'Press "l" or right mouse on same letter'})]})]})},J=n(127),K=v()("AuthActions")("IS_LOGGED_IN"),X=function(e){return function(t){return t(K({isLoggedIn:e}))}};n(58);var Y=function(){var e=Object(b.b)(),t=Object(s.f)(),n=Object(r.useState)(""),a=Object(W.a)(n,2),o=a[0],i=a[1],u=Object(r.useState)(""),j=Object(W.a)(u,2),f=j[0],O=j[1];function m(){return(m=Object(d.a)(l.a.mark((function n(c){return l.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,fetch("/api/auth/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:o,password:f})}).then((function(e){return e.json()})).then((function(e){return e.token})).then((function(n){n&&(localStorage.setItem(g,n),X(!0)(e),t.push("/"))}));case 2:case"end":return n.stop()}}),n)})))).apply(this,arguments)}return Object(c.jsxs)("div",{children:[Object(c.jsx)("h1",{className:"input-box",children:"Log In"}),Object(c.jsx)("p",{className:"input-box",children:"Enter username and password:"}),Object(c.jsx)("div",{className:"input-box",children:Object(c.jsx)(J.a,{color:"primary",label:"User Name",type:"text",value:o,onChange:function(e){return i(e.target.value)}})}),Object(c.jsxs)("div",{className:"input-box",children:[Object(c.jsx)(J.a,{label:"Password",type:"password",value:f,onChange:function(e){return O(e.target.value)}}),Object(c.jsx)("div",{className:"login-button",children:Object(c.jsx)(h.a,{variant:"contained",onClick:function(e){return m.apply(this,arguments)},children:"login"})})]})]})};var z=function(){var e=Object(b.b)(),t=Object(s.f)(),n=Object(r.useState)(""),a=Object(W.a)(n,2),o=a[0],i=a[1],u=Object(r.useState)(""),j=Object(W.a)(u,2),f=j[0],O=j[1],m=Object(r.useState)(""),p=Object(W.a)(m,2),v=p[0],S=p[1];function x(){return(x=Object(d.a)(l.a.mark((function n(c){return l.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,fetch("/api/auth/registration",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:o,password:f,confirmPassword:v})}).then((function(e){return e.json()})).then((function(e){return e.token})).then((function(n){n&&(localStorage.setItem(g,n),X(!0)(e),t.push("/"))}));case 2:case"end":return n.stop()}}),n)})))).apply(this,arguments)}return Object(c.jsxs)("div",{children:[Object(c.jsx)("h1",{className:"input-box",children:"Register"}),Object(c.jsx)("p",{className:"input-box",children:"Enter username and password:"}),Object(c.jsx)("div",{className:"input-box",children:Object(c.jsx)(J.a,{label:"User Name",type:"text",value:o,onChange:function(e){return i(e.target.value)}})}),Object(c.jsx)("div",{className:"input-box",children:Object(c.jsx)(J.a,{label:"Password",type:"password",value:f,onChange:function(e){return O(e.target.value)}})}),Object(c.jsx)("div",{className:"input-box",children:Object(c.jsx)(J.a,{label:"Confirm Password",type:"password",value:v,onChange:function(e){return S(e.target.value)}})}),Object(c.jsx)("div",{className:"login-button",children:Object(c.jsx)(h.a,{variant:"contained",onClick:function(e){return x.apply(this,arguments)},children:"Submit"})})]})};var V=function(){var e=Object(b.b)(),t=Object(b.c)((function(e){return e.authReducer.isLoggedIn})),n=Object(s.f)();return Object(c.jsx)("nav",{className:"auth-options",children:t?Object(c.jsx)("button",{onClick:function(){X(!1)(e),window.localStorage.clear()},children:"Log Out"}):Object(c.jsxs)(c.Fragment,{children:[Object(c.jsx)("button",{onClick:function(){return n.push("/register")},children:"Register"}),Object(c.jsx)("button",{onClick:function(){return n.push("/login")},children:"Log in"})]})})};var Q=function(){var e=Object(s.f)();return Object(c.jsxs)("header",{id:"header",children:[Object(c.jsx)(i.b,{to:"/",children:Object(c.jsx)("h1",{className:"title",children:"Dual-Ballz-Back"})}),Object(c.jsx)("nav",{className:"auth-options",children:Object(c.jsx)("button",{onClick:function(){return e.push("/highscore")},children:"Highscores"})}),Object(c.jsx)(V,{})]})};var Z=function(e){var t=Object(b.c)((function(e){return e.authReducer.isLoggedIn})),n=Object(s.f)();return t||n.push("/login"),Object(c.jsx)("div",{children:e.exact?Object(c.jsx)(s.a,{exact:!0,path:e.path,component:e.component}):Object(c.jsx)(s.a,{exact:!1,path:e.path,component:e.component})})},$=n(123),q=n(122),ee=n(124),te=n(125),ne=n(130),ce=n(126);n(90);function re(){var e=Object(b.b)(),t=Object(b.c)((function(e){return e.highScoreReducer.highScores})),n=function(){var t=Object(d.a)(l.a.mark((function t(){return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,G();case 2:t.t0=t.sent,(0,t.t0)(e);case 4:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();Object(r.useEffect)((function(){n()}),[]);var a=Object(b.c)((function(e){return e.gameSettingsReducer.gameSettings.nBack}));return Object(c.jsxs)("div",{className:"tableContainer",children:[Object(c.jsxs)("h2",{children:["Here you can see the highscores of other users, on the same level as you (",a,")"]}),Object(c.jsx)($.a,{component:q.a,className:"tableContainer",children:Object(c.jsxs)("table",{className:"table",children:[Object(c.jsx)(ee.a,{children:Object(c.jsxs)(te.a,{children:[Object(c.jsx)(ne.a,{className:"item",children:"Level"}),Object(c.jsx)(ne.a,{className:"item",children:"Score"}),Object(c.jsx)(ne.a,{className:"item",children:"Time"})]})}),Object(c.jsx)(ce.a,{children:t.sort((function(e,t){return e.score>t.score?-1:1})).map((function(e){return Object(c.jsxs)(te.a,{children:[Object(c.jsx)(ne.a,{className:"item",children:e.level}),Object(c.jsx)(ne.a,{className:"item",children:e.score}),Object(c.jsx)(ne.a,{className:"item",children:e.time.toLocaleDateString()+" "+e.time.toLocaleTimeString()})]},"TableRowHighSCore: "+JSON.stringify(e))}))})]})})]})}var ae=function(){var e=window.location.origin.replace(/^http/,"ws"),t=Object(b.b)(),n=function n(){var c=new WebSocket(Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_BACKEND_WS_URL||e);setInterval((function(){c.send("ping")}),5e4);c.onopen=function(){console.log("connected")},c.onmessage=function(e){var n,c=JSON.parse(e.data);if(console.log("Message: ",c),c.level&&c.time&&c.score){var r={level:c.level,score:c.score,time:new Date(c.time)};console.log("Highscore: ",r),(n=r,function(e){return e(I({highScore:n}))})(t)}},c.onclose=function(){console.log("Disconnected. Trying to reconnect..."),n()}};return Object(r.useEffect)((function(){n()})),Object(c.jsx)("div",{className:"App",id:f,tabIndex:-1,children:Object(c.jsxs)(i.a,{children:[Object(c.jsx)(Q,{}),Object(c.jsxs)(s.c,{children:[Object(c.jsx)(Z,{exact:!0,path:"/",component:F}),Object(c.jsx)(s.a,{path:"/login",component:Y}),Object(c.jsx)(s.a,{path:"/register",component:z}),Object(c.jsx)(s.a,{path:"/highscore",component:re})]})]})})},oe=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,131)).then((function(t){var n=t.getCLS,c=t.getFID,r=t.getFCP,a=t.getLCP,o=t.getTTFB;n(e),c(e),r(e),a(e),o(e)}))},ie=n(35),se=n(7),ue=n(47),le={rounds:[]};var de={gameSettings:{nBack:1,isRunning:!1},currentGameScore:{correctSameLocation:0,correctSameLetter:0}};var je={isLoggedIn:!1};var he={highScores:[]};var be={gameRoundsReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:le,t=arguments.length>1?arguments[1]:void 0;return Object(p.isType)(t,x)?Object(se.a)(Object(se.a)({},e),{},{rounds:[].concat(Object(ue.a)(e.rounds),[t.payload.gameRound])}):Object(p.isType)(t,y)?Object(se.a)(Object(se.a)({},e),{},{rounds:[]}):e},gameSettingsReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:de,t=arguments.length>1?arguments[1]:void 0;return Object(p.isType)(t,N)?Object(se.a)(Object(se.a)({},e),{},{gameSettings:Object(se.a)(Object(se.a)({},e.gameSettings),{},{nBack:t.payload.nBack})}):Object(p.isType)(t,R)?Object(se.a)(Object(se.a)({},e),{},{gameSettings:Object(se.a)(Object(se.a)({},e.gameSettings),{},{isRunning:t.payload.isRunning})}):Object(p.isType)(t,k)?Object(se.a)(Object(se.a)({},e),{},{currentGameScore:Object(se.a)(Object(se.a)({},e.currentGameScore),{},{correctSameLetter:e.currentGameScore.correctSameLetter+t.payload.amountToAdd})}):Object(p.isType)(t,T)?Object(se.a)(Object(se.a)({},e),{},{currentGameScore:Object(se.a)(Object(se.a)({},e.currentGameScore),{},{correctSameLocation:e.currentGameScore.correctSameLocation+t.payload.amountToAdd})}):Object(p.isType)(t,L)?Object(se.a)(Object(se.a)({},e),{},{currentGameScore:Object(se.a)(Object(se.a)({},e.currentGameScore),{},{correctSameLocation:0,correctSameLetter:0})}):e},authReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:je,t=arguments.length>1?arguments[1]:void 0;return Object(p.isType)(t,K)?Object(se.a)(Object(se.a)({},e),{},{isLoggedIn:t.payload.isLoggedIn}):e},highScoreReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:he,t=arguments.length>1?arguments[1]:void 0;return Object(p.isType)(t,I)?Object(se.a)(Object(se.a)({},e),{},{highScores:[].concat(Object(ue.a)(e.highScores),[t.payload.highScore])}):Object(p.isType)(t,D.done)?Object(se.a)(Object(se.a)({},e),{},{highScores:t.payload.result.highScores}):e}},fe=Object(ie.b)(Object(se.a)({},be)),ge=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function Oe(e,t){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var n=e.installing;null!=n&&(n.onstatechange=function(){"installed"===n.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://cra.link/PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}var me=Object(ie.c)(fe),pe=t.default=me;o.a.render(Object(c.jsx)(b.a,{store:me,children:Object(c.jsx)(ae,{})}),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var t="".concat("","/service-worker.js");ge?(!function(e,t){fetch(e,{headers:{"Service-Worker":"script"}}).then((function(n){var c=n.headers.get("content-type");404===n.status||null!=c&&-1===c.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):Oe(e,t)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(t,e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://cra.link/PWA")}))):Oe(t,e)}))}}(),oe()}},[[91,1,2]]]);
//# sourceMappingURL=main.1bcd0c03.chunk.js.map